<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - OneLastAI</title>

  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', 'Roboto', 'Arial', sans-serif;
      background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
      color: #ffffff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .dashboard-container {
      padding: 6rem 2rem 4rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .dashboard-header {
      text-align: center;
      margin-bottom: 4rem;
    }

    .dashboard-title {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-shadow: 0 0 20px #00d4ff;
      background: linear-gradient(45deg, #00d4ff, #0099cc, #66d9ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 4rem;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(0, 212, 255, 0.3);
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      backdrop-filter: blur(10px);
    }

    .stat-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: #00d4ff;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: #b8b8b8;
      font-size: 0.9rem;
    }

    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .action-card {
      background: rgba(0, 212, 255, 0.1);
      border: 1px solid #00d4ff;
      border-radius: 15px;
      padding: 2rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .action-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
    }

    .action-title {
      font-size: 1.5rem;
      color: #00d4ff;
      margin-bottom: 1rem;
    }

    .action-description {
      color: #b8b8b8;
      line-height: 1.6;
    }

    .section-header {
      margin: 4rem 0 2rem 0;
      text-align: center;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 600;
      color: #00d4ff;
      margin-bottom: 1rem;
    }

    /* Help Chatbot Styles */
    .help-chatbot-section {
      margin-top: 3rem;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .chatbot-container {
      background: rgba(0, 212, 255, 0.05);
      border: 1px solid rgba(0, 212, 255, 0.3);
      border-radius: 20px;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .chatbot-header {
      background: rgba(0, 212, 255, 0.1);
      padding: 2rem;
      text-align: center;
      border-bottom: 1px solid rgba(0, 212, 255, 0.2);
    }

    .chatbot-header h3 {
      color: #00d4ff;
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .chatbot-header p {
      color: #b8b8b8;
      font-size: 0.9rem;
    }

    .chatbot-messages {
      height: 400px;
      overflow-y: auto;
      padding: 1rem;
      scrollbar-width: thin;
      scrollbar-color: #00d4ff #1a1a2e;
    }

    .chatbot-messages::-webkit-scrollbar {
      width: 6px;
    }

    .chatbot-messages::-webkit-scrollbar-track {
      background: #1a1a2e;
    }

    .chatbot-messages::-webkit-scrollbar-thumb {
      background: #00d4ff;
      border-radius: 3px;
    }

    .bot-message, .user-message {
      display: flex;
      margin-bottom: 1rem;
      animation: slideIn 0.3s ease;
    }

    .user-message {
      justify-content: flex-end;
    }

    .bot-avatar, .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      margin-right: 1rem;
      background: rgba(0, 212, 255, 0.2);
    }

    .user-avatar {
      margin-left: 1rem;
      margin-right: 0;
      background: rgba(102, 217, 255, 0.2);
    }

    .message-content {
      max-width: 80%;
      background: rgba(255, 255, 255, 0.05);
      padding: 1rem;
      border-radius: 15px;
      border: 1px solid rgba(0, 212, 255, 0.2);
    }

    .user-message .message-content {
      background: rgba(0, 212, 255, 0.1);
    }

    .quick-options {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .quick-btn {
      background: rgba(0, 212, 255, 0.2);
      border: 1px solid #00d4ff;
      color: #00d4ff;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.8rem;
      transition: all 0.3s ease;
    }

    .quick-btn:hover {
      background: rgba(0, 212, 255, 0.3);
      transform: translateY(-2px);
    }

    .chatbot-input {
      display: flex;
      padding: 1rem;
      border-top: 1px solid rgba(0, 212, 255, 0.2);
      background: rgba(0, 0, 0, 0.2);
    }

    #help-input {
      flex: 1;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(0, 212, 255, 0.3);
      border-radius: 25px;
      padding: 1rem 1.5rem;
      color: white;
      font-size: 0.9rem;
      outline: none;
    }

    #help-input::placeholder {
      color: #b8b8b8;
    }

    #help-input:focus {
      border-color: #00d4ff;
      box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
    }

    .send-btn {
      background: #00d4ff;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      margin-left: 1rem;
      cursor: pointer;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }

    .send-btn:hover {
      background: #0099cc;
      transform: scale(1.1);
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .chatbot-messages {
        height: 300px;
      }
      
      .quick-options {
        flex-direction: column;
      }
      
      .message-content {
        max-width: 90%;
      }
    }
  </style>
</head>

<body>
  <div class="dashboard-container">
    <div class="dashboard-header">
      <h1 class="dashboard-title">ğŸ  Welcome to Your Dashboard</h1>
      <p style="color: #b8b8b8; font-size: 1.1rem;">Manage your AI agents and monitor your usage</p>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸŒŒ</div>
        <div class="stat-value">24</div>
        <div class="stat-label">Available Agents</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ’¬</div>
        <div class="stat-value">1,250</div>
        <div class="stat-label">Conversations This Month</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">âš¡</div>
        <div class="stat-value">98.5%</div>
        <div class="stat-label">Success Rate</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-value">5</div>
        <div class="stat-label">Favorite Agents</div>
      </div>
    </div>

    <!-- AI Agents Section -->
    <div class="section-header">
      <h2 class="section-title">ğŸŒŒ AI Agents</h2>
    </div>
    <div class="quick-actions">
      <div class="action-card" onclick="window.location='/my-agents'">
        <div class="action-title">ğŸ¤– My AI Agents</div>
        <div class="action-description">
          View and manage your AI agents, check usage statistics, and configure preferences.
        </div>
      </div>
      
      <div class="action-card" onclick="window.location='/templates'">
        <div class="action-title">ğŸ“ Templates Library</div>
        <div class="action-description">
          Browse pre-built templates and prompts to get started quickly with any agent.
        </div>
      </div>
      
      <div class="action-card" onclick="window.location='/api-docs'">
        <div class="action-title">ğŸ“š API Documentation</div>
        <div class="action-description">
          Integrate our AI agents into your applications with our comprehensive API.
        </div>
      </div>
    </div>

    <!-- Community Section -->
    <div class="section-header">
      <h2 class="section-title">ğŸ‘¥ Community & Learning</h2>
    </div>
    <div class="quick-actions">
      <div class="action-card" onclick="window.location='/community/forum'">
        <div class="action-title">ğŸ’¬ Community Forum</div>
        <div class="action-description">
          Join discussions, ask questions, and share knowledge with our vibrant developer community.
        </div>
      </div>
      
      <div class="action-card" onclick="window.location='/learn'">
        <div class="action-title">ğŸ¯ Learning Paths</div>
        <div class="action-description">
          Interactive tutorials and structured learning paths for mastering AI development.
        </div>
      </div>
      
      <div class="action-card" onclick="window.location='/docs'">
        <div class="action-title">ï¿½ Documentation</div>
        <div class="action-description">
          Comprehensive guides, tutorials, and references for every skill level.
        </div>
      </div>
    </div>

    <!-- Account & Support Section -->
    <div class="section-header">
      <h2 class="section-title">âš™ï¸ Account & Support</h2>
    </div>
    <div class="quick-actions">
      <div class="action-card" onclick="window.location='/settings'">
        <div class="action-title">âš™ï¸ Settings</div>
        <div class="action-description">
          Customize your profile, update preferences, and manage your account settings.
        </div>
      </div>
      
      <div class="action-card" onclick="window.location='/billing'">
        <div class="action-title">ğŸ’³ Billing & Usage</div>
        <div class="action-description">
          Monitor your usage, upgrade plans, and manage billing information.
        </div>
      </div>
      
      <div class="action-card" onclick="window.location='/support'">
        <div class="action-title">ğŸ§ Support Center</div>
        <div class="action-description">
          Get help, submit tickets, and access our knowledge base and tutorials.
        </div>
      </div>
    </div>

    <!-- Help Chatbot Section -->
    <div class="section-header">
      <h2 class="section-title">ğŸ¤– AI Help Assistant</h2>
    </div>
    <div class="help-chatbot-section">
      <div class="chatbot-container">
        <div class="chatbot-header">
          <h3>ï¿½ Need Help? Ask Our AI Assistant</h3>
          <p>Get instant answers about OneLastAI platform, features, and troubleshooting</p>
        </div>
        <div class="chatbot-messages" id="chatbot-messages">
          <div class="bot-message">
            <span class="bot-avatar">ğŸ¤–</span>
            <div class="message-content">
              <p>Hello! I'm your OneLastAI assistant. How can I help you today?</p>
              <div class="quick-options">
                <button class="quick-btn" onclick="askQuestion('How do I start using AI agents?')">ğŸš€ Getting Started</button>
                <button class="quick-btn" onclick="askQuestion('What AI agents are available?')">ğŸŒŒ Available Agents</button>
                <button class="quick-btn" onclick="askQuestion('How does billing work?')">ğŸ’³ Billing Questions</button>
                <button class="quick-btn" onclick="askQuestion('API integration help')">ğŸ”Œ API Help</button>
              </div>
            </div>
          </div>
        </div>
        <div class="chatbot-input">
          <input type="text" id="help-input" placeholder="Ask anything about OneLastAI..." onkeypress="handleKeyPress(event)">
          <button onclick="sendHelpMessage()" class="send-btn">ğŸ“¤</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // OneLastAI Dashboard Help System
    const knowledgeBase = {
      'getting_started': {
        title: 'ğŸš€ Getting Started',
        content: `
          <strong>Welcome to OneLastAI!</strong><br><br>
          Here's how to get started:<br>
          1. <strong>Explore AI Agents:</strong> Visit "My AI Agents" to see all 24+ available agents<br>
          2. <strong>Try Templates:</strong> Use pre-built templates for quick start<br>
          3. <strong>API Integration:</strong> Check API docs for custom integration<br>
          4. <strong>Community:</strong> Join our forum for tips and support<br><br>
          <em>Need specific help? Just ask!</em>
        `
      },
      'ai_agents': {
        title: 'ğŸŒŒ Available AI Agents',
        content: `
          <strong>Our AI Agent Collection:</strong><br><br>
          <strong>ğŸ¬ Content Creation:</strong><br>
          â€¢ CineGen - Video generation & editing<br>
          â€¢ ContentCrafter - Blog posts & articles<br>
          â€¢ MemoRA - Memory & note management<br><br>
          <strong>ğŸ“Š Data & Analytics:</strong><br>
          â€¢ DataSphere - Data analysis & visualization<br>
          â€¢ Reportly - Report generation<br>
          â€¢ NetScope - Network analysis<br><br>
          <strong>ğŸ¯ Specialized Tools:</strong><br>
          â€¢ DocuMind - Document processing<br>
          â€¢ EmotiSense - Emotion analysis<br>
          â€¢ TaskMaster - Project management<br>
          â€¢ InfoSeek - Information extraction<br><br>
          <em>And 14 more powerful agents!</em>
        `
      },
      'billing': {
        title: 'ğŸ’³ Billing & Plans',
        content: `
          <strong>OneLastAI Pricing:</strong><br><br>
          <strong>ğŸ†“ Free Tier:</strong><br>
          â€¢ 100 requests/month<br>
          â€¢ Basic agent access<br>
          â€¢ Community support<br><br>
          <strong>ğŸ’¼ Pro Plan - $29/month:</strong><br>
          â€¢ 10,000 requests/month<br>
          â€¢ All agents unlocked<br>
          â€¢ Priority support<br>
          â€¢ API access<br><br>
          <strong>ğŸš€ Enterprise - $99/month:</strong><br>
          â€¢ Unlimited requests<br>
          â€¢ Custom integrations<br>
          â€¢ Dedicated support<br>
          â€¢ SLA guarantee<br><br>
          <em>Upgrade anytime from Billing section!</em>
        `
      },
      'api_help': {
        title: 'ğŸ”Œ API Integration',
        content: `
          <strong>OneLastAI API Guide:</strong><br><br>
          <strong>ğŸ”‘ Authentication:</strong><br>
          â€¢ Get API key from Settings<br>
          â€¢ Use Bearer token authentication<br><br>
          <strong>ğŸ“ Basic Usage:</strong><br>
          <code>
          curl -H "Authorization: Bearer YOUR_KEY" \\<br>
          &nbsp;&nbsp;-H "Content-Type: application/json" \\<br>
          &nbsp;&nbsp;-d '{"agent": "cinegen", "prompt": "..."}' \\<br>
          &nbsp;&nbsp;https://api.onelastai.com/v1/generate
          </code><br><br>
          <strong>ğŸ“š Resources:</strong><br>
          â€¢ Full documentation: /api-docs<br>
          â€¢ SDKs: Python, Node.js, Ruby<br>
          â€¢ Code examples & tutorials<br><br>
          <em>Need specific integration help? Contact our team!</em>
        `
      },
      'community': {
        title: 'ğŸ‘¥ Community & Support',
        content: `
          <strong>Join Our Community:</strong><br><br>
          <strong>ğŸ’¬ Forum Categories:</strong><br>
          â€¢ General Discussion - Share ideas<br>
          â€¢ Technical Support - Get help<br>
          â€¢ Feature Requests - Suggest improvements<br>
          â€¢ Showcase - Share your projects<br><br>
          <strong>ğŸ“š Learning Resources:</strong><br>
          â€¢ Step-by-step tutorials<br>
          â€¢ Video guides<br>
          â€¢ Best practices<br>
          â€¢ Use case examples<br><br>
          <strong>ğŸ§ Support Channels:</strong><br>
          â€¢ Email: mail@onelastai.com<br>
          â€¢ Live chat (Pro+ users)<br>
          â€¢ Community forum<br>
          â€¢ Knowledge base<br><br>
          <em>We're here to help you succeed!</em>
        `
      },
      'troubleshooting': {
        title: 'ğŸ”§ Troubleshooting',
        content: `
          <strong>Common Issues & Solutions:</strong><br><br>
          <strong>âš¡ API Errors:</strong><br>
          â€¢ Check API key validity<br>
          â€¢ Verify request format<br>
          â€¢ Monitor rate limits<br><br>
          <strong>ğŸŒŒ Agent Issues:</strong><br>
          â€¢ Clear browser cache<br>
          â€¢ Check internet connection<br>
          â€¢ Try different agent<br><br>
          <strong>ğŸ’³ Billing Problems:</strong><br>
          â€¢ Update payment method<br>
          â€¢ Check usage limits<br>
          â€¢ Contact billing support<br><br>
          <strong>ğŸ” Login Issues:</strong><br>
          â€¢ Reset password<br>
          â€¢ Clear cookies<br>
          â€¢ Check email verification<br><br>
          <em>Still need help? Contact our support team!</em>
        `
      }
    };

    function askQuestion(question) {
      const input = document.getElementById('help-input');
      input.value = question;
      sendHelpMessage();
    }

    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        sendHelpMessage();
      }
    }

    function sendHelpMessage() {
      const input = document.getElementById('help-input');
      const message = input.value.trim();
      
      if (!message) return;

      // Add user message
      addMessage(message, 'user');
      input.value = '';

      // Generate AI response
      setTimeout(() => {
        const response = generateAIResponse(message);
        addMessage(response, 'bot');
      }, 800);
    }

    function addMessage(content, type) {
      const messagesContainer = document.getElementById('chatbot-messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = type + '-message';
      
      const avatar = document.createElement('span');
      avatar.className = type + '-avatar';
      avatar.textContent = type === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–';
      
      const messageContent = document.createElement('div');
      messageContent.className = 'message-content';
      messageContent.innerHTML = '<p>' + content + '</p>';
      
      if (type === 'user') {
        messageDiv.appendChild(messageContent);
        messageDiv.appendChild(avatar);
      } else {
        messageDiv.appendChild(avatar);
        messageDiv.appendChild(messageContent);
      }
      
      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function generateAIResponse(message) {
      const lowerMessage = message.toLowerCase();
      
      // Check for specific keywords and return appropriate responses
      if (lowerMessage.includes('start') || lowerMessage.includes('begin') || lowerMessage.includes('getting started')) {
        return knowledgeBase.getting_started.content;
      }
      
      if (lowerMessage.includes('agent') || lowerMessage.includes('available') || lowerMessage.includes('what')) {
        return knowledgeBase.ai_agents.content;
      }
      
      if (lowerMessage.includes('billing') || lowerMessage.includes('price') || lowerMessage.includes('cost') || lowerMessage.includes('plan')) {
        return knowledgeBase.billing.content;
      }
      
      if (lowerMessage.includes('api') || lowerMessage.includes('integration') || lowerMessage.includes('code')) {
        return knowledgeBase.api_help.content;
      }
      
      if (lowerMessage.includes('community') || lowerMessage.includes('forum') || lowerMessage.includes('support') || lowerMessage.includes('help')) {
        return knowledgeBase.community.content;
      }
      
      if (lowerMessage.includes('error') || lowerMessage.includes('problem') || lowerMessage.includes('issue') || lowerMessage.includes('bug')) {
        return knowledgeBase.troubleshooting.content;
      }
      
      if (lowerMessage.includes('tutorial') || lowerMessage.includes('learn') || lowerMessage.includes('guide')) {
        return `
          <strong>ğŸ“š Learning Resources:</strong><br><br>
          <strong>ğŸ¯ Quick Start Tutorials:</strong><br>
          â€¢ Visit /learn for interactive tutorials<br>
          â€¢ Check /docs for comprehensive guides<br>
          â€¢ Browse templates library for examples<br><br>
          <strong>ğŸ“º Video Tutorials:</strong><br>
          â€¢ Agent-specific walkthroughs<br>
          â€¢ API integration demos<br>
          â€¢ Best practices sessions<br><br>
          <strong>ğŸ’¡ Learning Paths:</strong><br>
          â€¢ Beginner to Advanced tracks<br>
          â€¢ Specialized use cases<br>
          â€¢ Certification programs<br><br>
          <em>Want specific tutorial recommendations? Just ask!</em>
        `;
      }
      
      // Default response for unrecognized queries
      return `
        <strong>I'm here to help! ğŸ¤–</strong><br><br>
        I can assist you with:<br>
        â€¢ <strong>Getting Started</strong> - First steps with OneLastAI<br>
        â€¢ <strong>AI Agents</strong> - Available agents and their capabilities<br>
        â€¢ <strong>Billing & Plans</strong> - Pricing and subscription info<br>
        â€¢ <strong>API Integration</strong> - Technical implementation help<br>
        â€¢ <strong>Community Support</strong> - Forums and resources<br>
        â€¢ <strong>Troubleshooting</strong> - Common issues and solutions<br><br>
        <em>Try asking about any of these topics, or be more specific about what you need help with!</em><br><br>
        <strong>Quick actions:</strong> Use the buttons below for common questions.
      `;
    }

    // Initialize with welcome message
    document.addEventListener('DOMContentLoaded', function() {
      // Auto-scroll to bottom on page load
      const messagesContainer = document.getElementById('chatbot-messages');
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    });
  </script>
</body>
</html>